<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CHANEL — Craftsmanship Continuum (Static)</title>
  <style>
    :root{
      --page-bg:#f7f6f4;         /* off-white */
      --card:#ffffff;
      --text:#222222;
      --muted:#6b6b6b;
      --gold:#8c6b2a;           /* darker muted luxury gold (darkened per request) */
      --gold-bg:rgba(140,107,42,0.08);
      --radius:14px;
      --glass: rgba(255,255,255,0.85);
      --shadow: 0 6px 18px rgba(27,27,27,0.06);
      --focus: 2px solid rgba(140,107,42,0.18);
      font-family: "Inter", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    html,body{
      height:100%;
      margin:0;
      background:var(--page-bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Layout container stays centered horizontally; pages can center vertically where needed */
    .container{
      max-width:980px;
      margin:0 auto;
      padding:24px;
      display:flex;
      flex-direction:column;
      gap:18px;
    }

    /* Header */
    .header{
      background:var(--card);
      border-radius:var(--radius);
      padding:14px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      box-shadow:var(--shadow);
      position:sticky;
      top:16px;
      z-index:40;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
    }
    .logo-wrap{
      width:48px;height:48px;border-radius:50%;background:var(--gold-bg);display:flex;align-items:center;justify-content:center;
    }
    .logo svg{ width:28px;height:28px; display:block; color:var(--gold); }

    .title{ font-weight:600; font-size:16px; }
    .subtitle{ font-size:12px; color:var(--muted); }

    .header-actions{ display:flex; gap:10px; align-items:center; }

    /* Card */
    .card{
      background:var(--card);
      border-radius:16px;
      padding:20px;
      box-shadow:var(--shadow);
    }
    .muted{ color:var(--muted); }
    .small{ font-size:13px; }

    /* Centering helper for landing: vertically center the initial content */
    .page-center {
      min-height: calc(100vh - 220px); /* account for header and nav */
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Main layout */
    .center{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:16px;
    }

    /* Product image placeholder */
    .product-image {
      width:220px;
      height:160px;
      border-radius:12px;
      background:linear-gradient(180deg, #fff, #faf9f8);
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow: 0 6px 14px rgba(0,0,0,0.04);
      margin:12px auto;
    }
    .product-image svg { width:160px; height:110px; color: #c9c7c5; display:block; }

    /* Scan button */
    .btn{
      display:inline-flex;
      align-items:center;
      gap:10px;
      border:0;
      padding:12px 18px;
      border-radius:10px;
      font-weight:600;
      cursor:pointer;
    }
    .btn-primary{
      background:var(--gold);
      color:white;
      box-shadow: 0 6px 18px rgba(140,107,42,0.18);
    }
    .btn-ghost{
      background:transparent;
      border:1px solid rgba(0,0,0,0.06);
      color:var(--text);
    }
    .btn:disabled{
      opacity:0.7;
      cursor:not-allowed;
    }

    /* scanning box */
    .scan-box{
      width:260px;height:260px;border-radius:16px;border:2px solid rgba(140,107,42,0.18);
      display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;
      background:linear-gradient(180deg, rgba(140,107,42,0.02), transparent);
    }
    .pulse{ animation: pulse 1.6s ease-in-out infinite; }
    @keyframes pulse{
      0%{ opacity:0.65 }
      50%{ opacity:1 }
      100%{ opacity:0.65 }
    }
    .scan-line{
      position:absolute;left:0;right:0;height:6px;background:linear-gradient(90deg,var(--gold),transparent);
      top:0; transform:translateY(-100%);
      animation: scanline 2s ease-in-out infinite;
    }
    @keyframes scanline{
      0%{ transform:translateY(-100%); }
      50%{ transform:translateY(100%); }
      100%{ transform:translateY(-100%); }
    }
    .center .spinner {
      width:38px;height:38px;border-radius:50%;border:4px solid rgba(0,0,0,0.06);border-top-color:var(--gold); animation:spin 1s linear infinite;
    }
    @keyframes spin{ to{ transform:rotate(360deg); } }

    /* nav bottom */
    .nav-bottom{
      position:fixed;
      left:0;right:0;
      bottom:22px;
      display:flex;
      justify-content:center;
      pointer-events:none;
    }
    .nav-shell{ width:100%; max-width:560px; padding:8px; pointer-events:auto; display:flex; gap:8px; align-items:center; background:var(--card); border-radius:999px; box-shadow:var(--shadow); }
    .nav-shell .nav-btn{ flex:1; padding:10px; border-radius:999px; display:flex; gap:8px; align-items:center; justify-content:center; background:transparent; border:0; cursor:pointer; }
    .nav-shell .nav-btn.active{ background:var(--gold-bg); }
    .nav-shell .nav-btn svg { display:block; }
    /* ensure icons and labels are centered */
    .nav-shell .nav-btn span { display:block; text-align:center; }

    /* list & product */
    .product-list button{ width:100%; text-align:left; display:flex; justify-content:space-between; gap:12px; padding:12px; border-radius:10px; border:1px solid rgba(0,0,0,0.04); background:transparent; cursor:pointer; }
    .product-list button:hover{ box-shadow:0 8px 20px rgba(0,0,0,0.04); }
    .product-meta{ color:var(--muted); font-size:13px; margin-top:6px; }

    /* product cardholder */
    .cardholder {
      display:flex;
      align-items:center;
      gap:12px;
      padding:12px;
      border-radius:10px;
      border:1px solid rgba(0,0,0,0.04);
      background:linear-gradient(180deg,#fff,#fbfbfb);
      width:100%;
      max-width:640px;
      box-shadow:0 6px 14px rgba(0,0,0,0.02);
    }
    .avatar {
      width:72px;height:72px;border-radius:12px;background:linear-gradient(180deg,var(--gold),#e9ddb6);display:flex;align-items:center;justify-content:center;font-weight:700;color:#3a2e16;font-size:22px;
      flex-shrink:0;
    }
    .cardholder-info{ display:flex;flex-direction:column; gap:4px; }
    .cardholder-name{ font-weight:600; font-size:15px; }
    .cardholder-meta{ color:var(--muted); font-size:13px; }

    /* sections */
    .section-title{ display:flex; align-items:center; gap:10px; font-weight:600; margin-bottom:10px; }
    .provenance-item{ border-radius:10px; padding:12px; border:1px solid rgba(0,0,0,0.04); margin-bottom:10px; }
    .provenance-item .summary{ display:flex; align-items:center; justify-content:space-between; gap:10px; cursor:pointer; }
    .chev{ transition:transform .2s ease; }
    .provenance-item.expanded .chev{ transform:rotate(90deg); }

    .cert{ display:inline-flex; gap:6px; align-items:center; padding:6px 10px; border-radius:999px; background:var(--gold-bg); color:#4f3d20; font-size:12px; margin-right:6px; margin-bottom:6px; }

    /* certificate */
    .certificate{
      max-width:780px;
      margin:0 auto;
      padding:28px;
      border:1px solid rgba(0,0,0,0.06);
      background:linear-gradient(180deg,#fff,#fbfbfb);
      border-radius:10px;
    }
    .certificate h1{ margin:0 0 6px; font-size:18px; letter-spacing:1px; }
    .certificate .meta{ color:var(--muted); font-size:13px; margin-bottom:18px; }
    .certificate .row{ display:flex; gap:24px; margin-bottom:10px; }
    .certificate .label{ color:var(--muted); width:160px; font-size:13px; }
    .certificate .value{ font-weight:600; color:var(--text); }

    .certificate .sign-row{ display:flex; justify-content:space-between; margin-top:24px; align-items:flex-end; }
    .signature{ text-align:center; width:220px; border-top:1px solid rgba(0,0,0,0.06); padding-top:10px; color:var(--muted); font-size:13px; }

    /* print */
    @media print{
      body *{ visibility:hidden; }
      .certificate-printable, .certificate-printable *{ visibility:visible; }
      .certificate-printable{ position:relative; left:0; top:0; width:100%; margin:0; }
    }

    /* responsive */
    @media (max-width:840px){
      .container{ padding:18px; }
      .header{ padding:12px; }
      .cardholder { max-width:100%; }
      .product-image { width:180px; height:130px; }
    }
    @media (max-width:640px){
      .container{ padding:14px; }
      .header{ margin-bottom:12px; top:12px; }
      .certificate .row{ flex-direction:column; gap:6px; }
      .certificate .label{ width:auto; }
      .nav-shell{ max-width:420px; }
      .cardholder { flex-direction:row; gap:10px; }
      .avatar { width:60px; height:60px; font-size:18px; }
    }

    /* utility */
    .kicker{ font-size:12px; color:var(--muted); }
    .muted-2{ color:#4f4f4f; font-size:14px; }
    .gap-3{ gap:12px; display:flex; }
    .text-xs{ font-size:12px; color:var(--muted); }
    .focus-ring:focus{ outline:none; box-shadow:var(--focus); border-radius:10px; }
    .hidden{ display:none !important; }
    .no-print{ display:block; }
  </style>
</head>
<body>
  <div class="container" id="app">
    <div class="header no-print" role="banner" aria-label="CHANEL header">
      <div class="brand">
        <div class="logo-wrap" aria-hidden>
          <div class="logo" aria-hidden>
            <!-- Chanel interlocking C logo (SVG) -->
            <svg viewBox="0 0 64 64" width="32" height="32" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden>
              <path d="M42 18 A12 12 0 1 0 42 46" stroke="currentColor" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M22 18 A12 12 0 1 1 22 46" stroke="currentColor" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>
        <div>
          <div class="title">CHANEL — Craftsmanship Continuum</div>
          <div class="subtitle">Digital Passport</div>
        </div>
      </div>

      <div class="header-actions">
        <div class="kicker">Powered by FeaturePrint</div>
        <button id="openProfile" class="btn btn-ghost focus-ring" title="Open profile" aria-controls="profileView">Profile</button>
      </div>
    </div>

    <!-- INITIAL VIEW: centered vertically -->
    <main id="initialView" class="card center page-center no-print" role="main" aria-live="polite">
      <div style="text-align:center; max-width:560px;">
        <div style="margin:8px auto 6px; width:96px; height:96px; border-radius:50%; background:var(--gold-bg); display:flex; align-items:center; justify-content:center;">
          <div class="logo" aria-hidden>
            <!-- Larger Chanel logo -->
            <svg viewBox="0 0 64 64" width="64" height="64" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden>
              <path d="M42 18 A12 12 0 1 0 42 46" stroke="currentColor" stroke-width="4.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M22 18 A12 12 0 1 1 22 46" stroke="currentColor" stroke-width="4.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>

        <h2 style="margin:0 0 8px;">FeaturePrint Technology</h2>
        <p class="muted-2" style="margin:0 0 12px;">Scan the CC logo on your CHANEL product to access its digital passport, provenance and care history.</p>

        <!-- Product placeholder image (Chanel flap bag silhouette) -->
        <div class="product-image" aria-hidden>
          <svg viewBox="0 0 160 110" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Product placeholder">
            <!-- simple stylized flap bag silhouette -->
            <g fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" opacity="0.75">
              <path d="M20 60 Q20 35 40 30 L60 22 Q80 18 100 22 L120 30 Q140 35 140 60 Q140 80 120 90 L40 90 Q20 80 20 60 Z" />
              <path d="M55 24 Q80 6 105 24" />
              <path d="M50 52 L110 52" />
              <circle cx="80" cy="52" r="5" fill="currentColor" />
            </g>
          </svg>
        </div>

        <div class="card" style="margin:8px 0 14px; border-radius:12px; padding:12px; background:var(--gold-bg); border:1px solid rgba(140,107,42,0.06);">
          <div style="display:flex; gap:10px; align-items:flex-start;">
            <div aria-hidden style="width:34px;height:34px; color:var(--gold);">
              <!-- info icon -->
              <svg viewBox="0 0 24 24" width="34" height="34" fill="currentColor"><path d="M11 10h2v6h-2v-6zM11 6h2v2h-2V6z"/></svg>
            </div>
            <div class="small muted">FeaturePrint reads unique microscopic surface features using advanced computer vision to verify authenticity.</div>
          </div>
        </div>

        <div style="margin-top:6px;">
          <button id="scanBtn" class="btn btn-primary" aria-controls="scanningView" aria-pressed="false">
            <!-- camera icon -->
            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="flex-shrink:0"><path d="M12 8a4 4 0 100 8 4 4 0 000-8zM4 6h3.2l1.2-1.8A1 1 0 009.2 3h5.6a1 1 0 00.8.2L16.8 6H20a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2z"/></svg>
            <span>Scan Product Hardware</span>
          </button>
        </div>
      </div>
    </main>

    <!-- SCANNING VIEW (hidden initially) -->
    <main id="scanningView" class="card center hidden no-print" role="status" aria-live="assertive" aria-hidden="true">
      <div style="text-align:center;">
        <h3 style="margin:0 0 10px;">Analyzing FeaturePrint...</h3>
        <p class="muted-2" style="margin:0 0 18px;">Hold steady. Reading microscopic surface features.</p>

        <div class="scan-box" aria-hidden>
          <div class="scan-line"></div>
          <div class="spinner" aria-hidden></div>
        </div>

        <div style="margin-top:16px;">
          <button id="cancelScan" class="btn btn-ghost">Cancel</button>
        </div>
      </div>
    </main>

    <!-- VERIFIED VIEW (hidden initially) -->
    <main id="verifiedView" class="card hidden no-print" role="main" aria-live="polite" aria-hidden="true">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
        <div>
          <div style="font-size:18px; font-weight:600;" id="productName">Classic Flap Bag</div>
          <div class="subtitle" id="productModel">Medium • Black</div>
        </div>
        <div style="display:flex; gap:10px; align-items:center;">
          <div style="display:flex; gap:8px; align-items:center; padding:6px 10px; border-radius:999px; background:rgba(16,185,129,0.08); color:#065f46;">
            <!-- check icon -->
            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg>
            <span style="font-weight:600; font-size:13px;">Verified</span>
          </div>
          <button id="backToScan" class="btn btn-ghost">Continue Scanning</button>
        </div>
      </div>

      <section style="display:grid; grid-template-columns:repeat(2,1fr); gap:12px; margin-bottom:12px;">
        <div class="card" style="padding:12px;">
          <div class="text-xs muted">Serial Number</div>
          <div id="serial" style="font-weight:600; margin-top:6px;">31******</div>
        </div>
        <div class="card" style="padding:12px;">
          <div class="text-xs muted">Production Date</div>
          <div id="production" style="font-weight:600; margin-top:6px;">September 2025</div>
        </div>
        <div class="card" style="padding:12px;">
          <div class="text-xs muted">Purchase Date</div>
          <div id="purchase" style="font-weight:600; margin-top:6px;">November 15, 2025</div>
        </div>
        <div class="card" style="padding:12px;">
          <div class="text-xs muted">Original Boutique</div>
          <div id="boutique" style="font-weight:600; margin-top:6px;">CHANEL Madison Avenue, New York</div>
        </div>
      </section>

      <!-- Product Cardholder -->
      <section style="margin-bottom:12px;">
        <div class="section-title"><svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="color:var(--gold)"><path d="M12 2l3 6h6l-5 4 2 7-6-4-6 4 2-7-5-4h6z"/></svg><span>Cardholder</span></div>

        <div id="cardholderContainer" class="cardholder">
          <div id="cardholderAvatar" class="avatar">AR</div>
          <div class="cardholder-info">
            <div id="cardholderName" class="cardholder-name">Alexandre R.</div>
            <div id="cardholderSince" class="cardholder-meta">Owner since Nov 15, 2025</div>
            <div class="cardholder-meta" id="cardholderExtra">Member since 2023 • CHANEL Concierge</div>
          </div>
          <div style="margin-left:auto; display:flex; gap:8px;">
            <button id="transferBtn" class="btn btn-ghost">Transfer</button>
            <button id="viewCertificateInline" class="btn btn-primary">Certificate</button>
          </div>
        </div>
      </section>

      <div style="padding:12px; border-radius:10px; background:var(--gold-bg); margin-bottom:14px;">
        <div style="display:flex; gap:10px; align-items:flex-start;">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" style="color:var(--gold)"><path d="M12 2L15 8l7 .5-5.5 4 2 7-6.5-3.5L5 22l2-7L2 10.5 9 10z"/></svg>
          <div class="small muted">This product's FeaturePrint signature has been verified against CHANEL's secure registry.</div>
        </div>
      </div>

      <!-- Provenance -->
      <section style="margin-bottom:12px;">
        <div class="section-title"><svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="color:var(--gold)"><path d="M12 2l3 6h6l-5 4 2 7-6-4-6 4 2-7-5-4h6z"/></svg><span>Complete Provenance Journey</span></div>

        <div id="provenanceList">
          <!-- items generated by JS -->
        </div>
      </section>

      <!-- Maintenance -->
      <section style="margin-bottom:12px;">
        <div class="section-title"><svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="color:#8b5cf6"><path d="M12 2a1 1 0 011 1v2h-2V3a1 1 0 011-1zM5 7l1.5 1.5 1-1L6 6l-1 1zM19 7l-1.5 1.5-1-1L18 6l1 1zM12 6a6 6 0 00-6 6c0 2.2 1.1 4.2 3 5.4V22h6v-4.6c1.9-1.2 3-3.2 3-5.4a6 6 0 00-6-6z"/></svg><span>Maintenance History</span></div>

        <div id="maintenanceList"></div>
      </section>

      <!-- Digital history -->
      <section style="margin-bottom:12px;">
        <div class="section-title"><svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="color:#2563eb"><path d="M12 1v11l8 4-1.5 2.5L12 15V1z"/></svg><span>Complete Digital History</span></div>

        <div id="digitalList"></div>
      </section>

      <div style="display:flex; gap:10px; margin-top:8px;">
        <button id="scheduleBtn" class="btn" style="border-radius:10px; background:var(--gold); color:white; padding:12px 16px;">Schedule Boutique Care</button>
        <button id="downloadCertBtn" class="btn btn-ghost" style="padding:12px 16px;">Download Certificate</button>
      </div>
    </main>

    <!-- CERTIFICATE VIEW (separate page / printable) -->
    <main id="certificateView" class="card hidden no-print" role="main" aria-live="polite" aria-hidden="true">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
        <div>
          <div style="font-size:18px; font-weight:600;">Digital Certificate</div>
          <div class="subtitle">Official CHANEL Certificate of Authenticity</div>
        </div>
        <div style="display:flex; gap:8px;">
          <button id="printCertBtn" class="btn btn-primary">Download / Print</button>
          <button id="closeCertBtn" class="btn btn-ghost">Back</button>
        </div>
      </div>

      <div class="certificate certificate-printable" id="certificateContent">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:18px;">
          <div>
            <h1>CHANEL Certificate of Authenticity</h1>
            <div class="meta">FeaturePrint verification & provenance record</div>
          </div>
          <div style="text-align:right;">
            <div style="font-weight:600; color:var(--gold); font-size:20px;">CHANEL</div>
            <div class="meta">Maison de Chanel</div>
          </div>
        </div>

        <div class="row">
          <div class="label">Product Name</div>
          <div class="value" id="certProductName">—</div>
        </div>
        <div class="row">
          <div class="label">Model & Color</div>
          <div class="value" id="certProductModel">—</div>
        </div>
        <div class="row">
          <div class="label">Serial Number</div>
          <div class="value" id="certSerial">—</div>
        </div>
        <div class="row">
          <div class="label">Production Date</div>
          <div class="value" id="certProduction">—</div>
        </div>
        <div class="row">
          <div class="label">Purchase Date</div>
          <div class="value" id="certPurchase">—</div>
        </div>
        <div class="row">
          <div class="label">Original Boutique</div>
          <div class="value" id="certBoutique">—</div>
        </div>

        <!-- Cardholder summary on certificate -->
        <div class="row">
          <div class="label">Cardholder</div>
          <div class="value" id="certCardholder">—</div>
        </div>

        <hr style="border:none;border-top:1px solid rgba(0,0,0,0.06); margin:18px 0;" />

        <div style="margin-bottom:12px;">
          <div style="font-weight:600; margin-bottom:8px;">Provenance Summary</div>
          <div id="certProvenanceSummary" class="muted small">—</div>
        </div>

        <div style="margin-top:14px;">
          <div style="font-weight:600; margin-bottom:8px;">FeaturePrint Verification</div>
          <div class="muted small">This product's FeaturePrint signature was verified against CHANEL's secure registry on: <span id="certVerifiedDate">—</span></div>
        </div>

        <div class="sign-row">
          <div class="signature">
            For the Maison<br/>
            <strong>CHANEL</strong>
          </div>
          <div class="signature">
            Authorized Representative<br/>
            <div style="margin-top:8px; font-size:12px; color:var(--muted);">Signature</div>
          </div>
        </div>
      </div>
    </main>

    <!-- PROFILE VIEW (hidden initially) -->
    <main id="profileView" class="card hidden no-print" role="region" aria-hidden="true">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
        <div>
          <div style="font-size:18px; font-weight:600;">My Collection</div>
          <div class="subtitle">3 items</div>
        </div>
        <div>
          <button id="backFromProfile" class="btn btn-ghost">Back</button>
        </div>
      </div>

      <section class="product-list" style="margin-bottom:12px;">
        <!-- generated by JS -->
      </section>

      <section class="card" style="margin-bottom:12px;">
        <div style="font-weight:600; margin-bottom:8px;">Collection Summary</div>
        <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:8px;">
          <div style="text-align:center;">
            <div style="font-weight:600; font-size:18px;">3</div>
            <div class="text-xs muted">Total Items</div>
          </div>
          <div style="text-align:center;">
            <div style="font-weight:600; font-size:18px;">3</div>
            <div class="text-xs muted">Verified</div>
          </div>
          <div style="text-align:center;">
            <div style="font-weight:600; font-size:18px;">2</div>
            <div class="text-xs muted">Serviced</div>
          </div>
        </div>
      </section>

      <section class="card">
        <div style="font-weight:600; margin-bottom:8px;">Boutique Care Services</div>
        <p class="muted-2 small" style="margin:0 0 12px;">Book an appointment at your preferred CHANEL boutique for expert care and servicing.</p>
        <button class="btn btn-primary">Book Appointment</button>
      </section>
    </main>

  </div>

  <!-- bottom nav -->
  <div class="nav-bottom no-print" aria-hidden>
    <div class="nav-shell">
      <button id="navScan" class="nav-btn active" title="Scan">
        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M12 8a4 4 0 100 8 4 4 0 000-8zM4 6h3.2l1.2-1.8A1 1 0 009.2 3h5.6a1 1 0 00.8.2L16.8 6H20a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2z"/></svg>
        <span class="text-xs muted">Scan</span>
      </button>
      <button id="navProfile" class="nav-btn" title="Profile">
        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M12 12a5 5 0 100-10 5 5 0 000 10zm0 2c-4.4 0-8 2.2-8 5v1h16v-1c0-2.8-3.6-5-8-5z"/></svg>
        <span class="text-xs muted">Profile</span>
      </button>
    </div>
  </div>

  <script>
    (function(){
      // Data (added cardholder fields)
      const userProducts = [
        {
          id: 1,
          name: "Classic Flap Bag",
          model: "Medium",
          color: "Black",
          serialNumber: "31******",
          authenticatedDate: "December 5, 2025",
          boutique: "CHANEL Madison Avenue, New York",
          productionDate: "September 2025",
          purchaseDate: "November 15, 2025",
          verifiedDate: "December 5, 2025",
          cardholder: {
            name: "Alexandre R.",
            since: "Nov 15, 2025",
            avatar: "AR",
            extra: "Member since 2023 • CHANEL Concierge"
          }
        },
        {
          id: 2,
          name: "Boy Bag",
          model: "Small",
          color: "Navy Blue",
          serialNumber: "29******",
          authenticatedDate: "March 10, 2024",
          boutique: "CHANEL Bond Street, London",
          productionDate: "January 2024",
          purchaseDate: "March 8, 2024",
          verifiedDate: "March 10, 2024",
          cardholder: {
            name: "Sophie M.",
            since: "Mar 08, 2024",
            avatar: "SM",
            extra: "Loyal Client • VIP Services"
          }
        },
        {
          id: 3,
          name: "Classic Loafers",
          model: "Size 38",
          color: "Beige & Black",
          serialNumber: "42******",
          authenticatedDate: "June 22, 2023",
          boutique: "CHANEL Rue Cambon, Paris",
          productionDate: "May 2023",
          purchaseDate: "June 20, 2023",
          verifiedDate: "June 22, 2023",
          cardholder: {
            name: "Isabelle D.",
            since: "Jun 20, 2023",
            avatar: "ID",
            extra: "Concierge Member"
          }
        }
      ];

      const maintenanceHistory = [
        {
          date: "August 15, 2025",
          service: "Boutique Care Service",
          location: "CHANEL Madison Avenue, New York",
          details: [
            "Professional leather conditioning",
            "Hardware polishing and inspection",
            "Chain strap adjustment",
            "Interior lining cleaning"
          ],
          artisan: "Master Craftsperson Jean-Pierre L.",
          duration: "3 hours",
          nextService: "February 2026"
        },
        {
          date: "March 20, 2025",
          service: "Preventive Care",
          location: "CHANEL Madison Avenue, New York",
          details: [
            "Leather hydration treatment",
            "Hardware tarnish prevention coating",
            "Stitch reinforcement check",
            "Shape restoration"
          ],
          artisan: "Certified Technician Marie C.",
          duration: "2 hours",
          nextService: "September 2025"
        }
      ];

      const digitalHistory = [
        {
          date: "December 5, 2025",
          event: "Digital Passport Accessed",
          location: "Ridgewood, New Jersey, US",
          details: "Complete provenance verification via FeaturePrint"
        },
        {
          date: "November 15, 2025",
          event: "Ownership Registered",
          location: "CHANEL Madison Avenue, New York",
          details: "Product registered to customer profile"
        },
        {
          date: "November 15, 2025",
          event: "Retail Transaction",
          location: "CHANEL Madison Avenue, New York",
          details: "Original purchase completed"
        },
        {
          date: "October 28, 2025",
          event: "Quality Control Passed",
          location: "CHANEL Atelier, Pantin, France",
          details: "Final 7-point inspection approved"
        },
        {
          date: "October 25, 2025",
          event: "Assembly Completed",
          location: "CHANEL Atelier, Pantin, France",
          details: "Hand-assembled by master artisan Marie D."
        },
        {
          date: "September 12, 2025",
          event: "Components Sourced",
          location: "Multiple European Suppliers",
          details: "All materials quality certified and blockchain recorded"
        }
      ];

      const provenanceData = {
        leather: {
          title: "Lambskin Leather",
          origin: "Tannery Roux, Mazamet, France",
          details: [
            "Sourced from European farms meeting animal welfare standards",
            "Vegetable-tanned using traditional French methods",
            "Chrome-free processing for environmental sustainability",
            "Quality grade: Premium A+",
            "Tanning duration: 45 days"
          ],
          certifications: ["LWG Gold Rated", "EU Animal Welfare Certified"]
        },
        textile: {
          title: "Interior Lining",
          origin: "Textile Mill Como, Italy",
          details: [
            "100% Italian-woven microfiber textile",
            "Composition: 80% polyester, 20% cotton blend",
            "Dyed using OEKO-TEX certified colorants",
            "Water consumption: 40% less than industry standard",
            "Production batch: TXT-2025-0847"
          ],
          certifications: ["OEKO-TEX Standard 100", "Made in Italy"]
        },
        hardware: {
          title: "Metal Hardware",
          origin: "Fonderie Martin, Lyon, France",
          details: [
            "24K gold-plated brass alloy",
            "Alloy composition: 70% copper, 30% zinc",
            "FeaturePrint embedded in CC logo turnlock",
            "Electroplating thickness: 2.5 microns",
            "Tarnish resistance: 10+ years with proper care"
          ],
          certifications: ["RJC Chain of Custody", "Conflict-Free Certified"]
        },
        chain: {
          title: "Iconic Chain Strap",
          origin: "Atelier Desrues, Paris, France",
          details: [
            "Hand-woven leather and chain construction",
            "304 stainless steel core for durability",
            "Gold-tone finish matching hardware",
            "Interlaced with color-matched lambskin",
            "Artisan crafting time: 3.5 hours per strap"
          ],
          certifications: ["Maison Desrues Heritage Craft"]
        },
        assembly: {
          title: "Artisan Assembly",
          origin: "CHANEL Atelier, Pantin, France",
          details: [
            "Hand-assembled by master artisan Marie D.",
            "180+ individual stitches per bag",
            "Quality control: 7-point inspection",
            "Assembly time: 15 hours",
            "Artisan experience: 12 years with CHANEL"
          ],
          certifications: ["CHANEL Artisan Certified"]
        }
      };

      // Elements
      const initialView = document.getElementById('initialView');
      const scanningView = document.getElementById('scanningView');
      const verifiedView = document.getElementById('verifiedView');
      const profileView = document.getElementById('profileView');
      const certificateView = document.getElementById('certificateView');

      const scanBtn = document.getElementById('scanBtn');
      const cancelScan = document.getElementById('cancelScan');
      const backToScan = document.getElementById('backToScan');
      const openProfile = document.getElementById('openProfile');
      const backFromProfile = document.getElementById('backFromProfile');
      const navScan = document.getElementById('navScan');
      const navProfile = document.getElementById('navProfile');

      const downloadCertBtn = document.getElementById('downloadCertBtn');
      const printCertBtn = document.getElementById('printCertBtn');
      const closeCertBtn = document.getElementById('closeCertBtn');

      const productNameEl = document.getElementById('productName');
      const productModelEl = document.getElementById('productModel');
      const serialEl = document.getElementById('serial');
      const productionEl = document.getElementById('production');
      const purchaseEl = document.getElementById('purchase');
      const boutiqueEl = document.getElementById('boutique');

      const cardholderAvatar = document.getElementById('cardholderAvatar');
      const cardholderName = document.getElementById('cardholderName');
      const cardholderSince = document.getElementById('cardholderSince');
      const cardholderExtra = document.getElementById('cardholderExtra');

      const certProductName = document.getElementById('certProductName');
      const certProductModel = document.getElementById('certProductModel');
      const certSerial = document.getElementById('certSerial');
      const certProduction = document.getElementById('certProduction');
      const certPurchase = document.getElementById('certPurchase');
      const certBoutique = document.getElementById('certBoutique');
      const certProvenanceSummary = document.getElementById('certProvenanceSummary');
      const certVerifiedDate = document.getElementById('certVerifiedDate');
      const certCardholder = document.getElementById('certCardholder');

      const provenanceList = document.getElementById('provenanceList');
      const maintenanceList = document.getElementById('maintenanceList');
      const digitalList = document.getElementById('digitalList');
      const productListEl = document.querySelector('.product-list');

      // State
      let scanState = 'initial'; // initial | scanning | verified
      let activeTab = 'scan';
      let selectedProduct = 0;
      let scanTimer = null;

      // Utility: hide/show views
      function hideAllViews(){
        [initialView, scanningView, verifiedView, profileView, certificateView].forEach(el => {
          if(!el) return;
          el.classList.add('hidden');
          el.setAttribute('aria-hidden','true');
        });
      }
      function showView(view){
        hideAllViews();
        view.classList.remove('hidden');
        view.removeAttribute('aria-hidden');
      }

      function updateNav(){
        navScan.classList.toggle('active', activeTab === 'scan');
        navProfile.classList.toggle('active', activeTab === 'profile');
      }

      function startScanSimulation(){
        // start scanning
        scanState = 'scanning';
        showView(scanningView);
        scanBtn.disabled = true;
        // simulate delay then go to verified
        scanTimer = setTimeout(() => {
          scanState = 'verified';
          showVerified();
        }, 2000);
      }

      function cancelScanFlow(){
        clearTimeout(scanTimer);
        scanTimer = null;
        scanState = 'initial';
        scanBtn.disabled = false;
        showView(initialView);
      }

      function showVerified(){
        scanBtn.disabled = false;
        activeTab = 'scan';
        updateNav();
        populateVerified(selectedProduct);
        showView(verifiedView);
      }

      function populateVerified(idx){
        const p = userProducts[idx] || userProducts[0];
        productNameEl.textContent = p.name;
        productModelEl.textContent = p.model + " • " + p.color;
        serialEl.textContent = p.serialNumber;
        productionEl.textContent = p.productionDate;
        purchaseEl.textContent = p.purchaseDate;
        boutiqueEl.textContent = p.boutique;

        // populate cardholder info
        if(p.cardholder){
          cardholderAvatar.textContent = p.cardholder.avatar || p.cardholder.name.split(' ').map(n=>n[0]).slice(0,2).join('').toUpperCase();
          cardholderName.textContent = p.cardholder.name;
          cardholderSince.textContent = "Owner since " + (p.cardholder.since || p.purchaseDate || '—');
          cardholderExtra.textContent = p.cardholder.extra || '';
        } else {
          cardholderAvatar.textContent = "—";
          cardholderName.textContent = "Unassigned";
          cardholderSince.textContent = "";
          cardholderExtra.textContent = "";
        }

        // provenance
        provenanceList.innerHTML = '';
        Object.entries(provenanceData).forEach(([key,data])=>{
          const item = document.createElement('div');
          item.className = 'provenance-item';
          const header = document.createElement('div');
          header.className = 'summary';
          header.tabIndex = 0;
          header.innerHTML = `
            <div>
              <div style="font-weight:600;">${data.title}</div>
              <div class="small muted" style="margin-top:6px;"><svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor" style="vertical-align:middle; margin-right:6px;"><path d="M12 2L15 8l7 .5-5.5 4 2 7-6.5-3.5L5 22l2-7L2 10.5 9 10z"/></svg>${data.origin}</div>
            </div>
            <div class="chev" aria-hidden>›</div>
          `;
          header.addEventListener('click', ()=> toggleProv(item));
          header.addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' ') toggleProv(item); });
          item.appendChild(header);

          const details = document.createElement('div');
          details.className = 'prov-details hidden';
          details.style.marginTop = '10px';
          // details list
          const ul = document.createElement('ul');
          ul.style.margin = '0';
          ul.style.paddingLeft = '16px';
          data.details.forEach(d=>{
            const li = document.createElement('li');
            li.style.marginBottom = '6px';
            li.textContent = d;
            ul.appendChild(li);
          });
          details.appendChild(ul);
          // certs
          const certWrap = document.createElement('div');
          certWrap.style.marginTop='10px';
          data.certifications.forEach(c=>{
            const cspan = document.createElement('span');
            cspan.className = 'cert';
            cspan.textContent = c;
            certWrap.appendChild(cspan);
          });
          details.appendChild(certWrap);

          item.appendChild(details);
          provenanceList.appendChild(item);
        });

        // maintenance
        maintenanceList.innerHTML = '';
        maintenanceHistory.forEach(s=>{
          const wrap = document.createElement('div');
          wrap.style.border='1px solid rgba(0,0,0,0.04)';
          wrap.style.borderRadius='10px';
          wrap.style.padding='12px';
          wrap.style.marginBottom='10px';
          wrap.innerHTML = `
            <div style="display:flex;justify-content:space-between;align-items:flex-start;">
              <div>
                <div style="font-weight:600;">${s.service}</div>
                <div class="text-xs muted">${s.date}</div>
              </div>
              <div class="small muted" style="padding:6px 10px;border-radius:999px;background:var(--gold-bg);">Completed</div>
            </div>
          `;
          const list = document.createElement('ul');
          list.style.marginTop='8px';
          s.details.forEach(d=>{
            const li = document.createElement('li');
            li.textContent = d;
            li.style.marginBottom='6px';
            list.appendChild(li);
          });
          wrap.appendChild(list);

          const meta = document.createElement('div');
          meta.className='small muted';
          meta.style.marginTop='8px';
          meta.innerHTML = `<div><strong>Artisan:</strong> ${s.artisan}</div>
                            <div><strong>Duration:</strong> ${s.duration}</div>
                            <div><strong>Location:</strong> ${s.location}</div>
                            <div><strong>Next Service:</strong> ${s.nextService}</div>`;
          wrap.appendChild(meta);

          maintenanceList.appendChild(wrap);
        });

        // digital
        digitalList.innerHTML='';
        digitalHistory.forEach(e=>{
          const row = document.createElement('div');
          row.style.display='flex';
          row.style.gap='12px';
          row.style.marginBottom='10px';
          row.innerHTML = `<div style="width:10px;height:10px;border-radius:50%;background:var(--gold); margin-top:6px;"></div>
                           <div>
                             <div style="font-weight:600;">${e.event}</div>
                             <div class="text-xs muted">${e.date}</div>
                             <div class="small" style="margin-top:6px;">${e.details}</div>
                             <div class="text-xs muted" style="margin-top:6px;">${e.location}</div>
                           </div>`;
          digitalList.appendChild(row);
        });
      }

      function toggleProv(item){
        const details = item.querySelector('.prov-details');
        const isHidden = details.classList.contains('hidden');
        // collapse any open
        document.querySelectorAll('#provenanceList .provenance-item').forEach(pi=>{
          pi.classList.remove('expanded');
          const d = pi.querySelector('.prov-details');
          if(d) d.classList.add('hidden');
        });
        if(isHidden){
          details.classList.remove('hidden');
          item.classList.add('expanded');
        } else {
          details.classList.add('hidden');
          item.classList.remove('expanded');
        }
      }

      function renderProductList(){
        productListEl.innerHTML='';
        userProducts.forEach((p, idx)=>{
          const btn = document.createElement('button');
          // include small cardholder snippet & product thumbnail placeholder
          const ch = p.cardholder ? `
            <div style="display:flex;align-items:center;gap:12px; width:100%;">
              <div style="width:56px;height:56px;border-radius:8px;flex-shrink:0;background:linear-gradient(180deg,var(--gold),#e9ddb6);display:flex;align-items:center;justify-content:center;font-weight:700;color:#3a2e16;">${p.cardholder.avatar}</div>
              <div style="min-width:0;flex:1;">
                <div style="font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">${p.name}</div>
                <div class="product-meta" style="margin-top:6px;">${p.cardholder.name} • ${p.model}</div>
              </div>
              <div style="width:66px; display:flex; justify-content:center; align-items:center;">
                <div style="width:56px;height:36px;border-radius:6px;background:#f3f2f1;display:flex;align-items:center;justify-content:center;color:#c3c1bf;">
                  <!-- thumbnail bag SVG -->
                  <svg viewBox="0 0 120 72" width="36" height="26" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 36 Q12 20 28 14 L42 8 Q60 2 78 8 L92 14 Q108 20 108 36 Q108 52 92 60 L28 60 Q12 52 12 36 Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </div>
              </div>
            </div>` : `
            <div style="display:flex;align-items:center;gap:12px; width:100%;">
              <div style="width:56px;height:56px;border-radius:8px;background:#f3f2f1;display:flex;align-items:center;justify-content:center;color:#c3c1bf; flex-shrink:0;">
                <svg viewBox="0 0 120 72" width="36" height="26" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 36 Q12 20 28 14 L42 8 Q60 2 78 8 L92 14 Q108 20 108 36 Q108 52 92 60 L28 60 Q12 52 12 36 Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
              </div>
              <div style="min-width:0;flex:1;">
                <div style="font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">${p.name}</div>
                <div class="product-meta" style="margin-top:6px;">${p.model} • ${p.color}</div>
              </div>
              <div style="width:24px; display:flex; justify-content:center; align-items:center; color:var(--muted);">›</div>
            </div>
          `;
          btn.innerHTML = ch;
          btn.addEventListener('click', ()=>{
            selectedProduct = idx;
            // show verified directly for chosen product
            populateVerified(idx);
            scanState = 'verified';
            activeTab = 'scan';
            updateNav();
            showView(verifiedView);
            // scroll verified view into center vertically
            setTimeout(()=> window.scrollTo({ top: 0, behavior: 'smooth' }), 80);
          });
          productListEl.appendChild(btn);
        });
      }

      // Certificate population & print
      function openCertificateView(idx){
        const p = userProducts[idx] || userProducts[0];
        certProductName.textContent = p.name;
        certProductModel.textContent = p.model + " • " + p.color;
        certSerial.textContent = p.serialNumber;
        certProduction.textContent = p.productionDate;
        certPurchase.textContent = p.purchaseDate;
        certBoutique.textContent = p.boutique;
        certVerifiedDate.textContent = p.verifiedDate || p.authenticatedDate || '—';

        if(p.cardholder){
          certCardholder.textContent = `${p.cardholder.name} (since ${p.cardholder.since})`;
        } else {
          certCardholder.textContent = 'Unassigned';
        }

        // build a short provenance summary from provenanceData titles
        const provTitles = Object.values(provenanceData).map(v => v.title).slice(0,3).join(', ');
        certProvenanceSummary.textContent = provTitles + ". See full provenance for detailed supplier and certification information.";

        // show certificate view
        showView(certificateView);
        setTimeout(()=> window.scrollTo({ top: 0, behavior: 'smooth' }), 80);
      }

      // Event bindings
      scanBtn.addEventListener('click', ()=> {
        if(scanState === 'scanning') return;
        startScanSimulation();
      });
      cancelScan.addEventListener('click', cancelScanFlow);
      backToScan.addEventListener('click', ()=>{
        // go back to scanning initial state (ready to scan)
        scanState = 'initial';
        showView(initialView);
      });

      openProfile.addEventListener('click', ()=>{
        activeTab = 'profile';
        updateNav();
        renderProductList();
        showView(profileView);
      });
      backFromProfile.addEventListener('click', ()=>{
        activeTab = 'scan';
        updateNav();
        showView(initialView);
      });

      navScan.addEventListener('click', ()=>{
        activeTab='scan';
        updateNav();
        showView(initialView);
      });
      navProfile.addEventListener('click', ()=>{
        activeTab='profile';
        updateNav();
        renderProductList();
        showView(profileView);
      });

      downloadCertBtn.addEventListener('click', ()=>{
        openCertificateView(selectedProduct);
      });

      // "Certificate" button inline in product cardholder
      document.addEventListener('click', (e) => {
        if(e.target && (e.target.id === 'viewCertificateInline' || e.target.closest('#viewCertificateInline'))){
          openCertificateView(selectedProduct);
        }
        if(e.target && (e.target.id === 'transferBtn' || e.target.closest('#transferBtn'))){
          alert('Transfer flow placeholder — integrate with ownership transfer service.');
        }
      });

      printCertBtn.addEventListener('click', ()=>{
        // Trigger print dialog - users can save as PDF
        window.print();
      });

      closeCertBtn.addEventListener('click', ()=>{
        // go back to verification view
        showView(verifiedView);
      });

      // keyboard: ESC closes provenance expanded sections
      document.addEventListener('keydown', (e)=>{
        if(e.key === 'Escape'){
          document.querySelectorAll('#provenanceList .provenance-item.expanded').forEach(pi=>{
            pi.classList.remove('expanded');
            const d = pi.querySelector('.prov-details');
            if(d) d.classList.add('hidden');
          });
        }
      });

      // initial render
      showView(initialView);
      updateNav();
      renderProductList();
    })();
  </script>
</body>
</html>
